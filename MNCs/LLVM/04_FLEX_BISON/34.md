
---

## âœ… `calc.y` â€” Bison Grammar for Arithmetic Expressions

```c
%{
#include <iostream>
#include <cstdlib>   // for atoi
using namespace std;

// Declare the lexer function
int yylex();
void yyerror(const char *s);
%}

/* Declare tokens */
%token NUMBER
%left '+' '-'
%left '*' '/'

%%

/* Grammar rules */
expr:
      expr '+' expr   { cout << $1 + $3 << endl; $$ = $1 + $3; }
    | expr '-' expr   { cout << $1 - $3 << endl; $$ = $1 - $3; }
    | expr '*' expr   { cout << $1 * $3 << endl; $$ = $1 * $3; }
    | expr '/' expr   { 
                          if($3 == 0) { 
                              cout << "Error: Division by zero!" << endl; 
                              $$ = 0; 
                          } else { 
                              cout << $1 / $3 << endl; 
                              $$ = $1 / $3; 
                          } 
                       }
    | '(' expr ')'    { $$ = $2; }
    | NUMBER          { $$ = atoi(yytext); }
    ;

%%

/* Error handling */
void yyerror(const char *s) {
    cerr << "Error: " << s << endl;
}

int main() {
    cout << "Enter an arithmetic expression: ";
    yyparse();  // Start parsing
    return 0;
}
```

---

### ðŸ”¹ How It Works

1. **Tokens:** `NUMBER` comes from the Flex lexer.
2. **Operator precedence:** `%left '+' '-'` ensures addition/subtraction are evaluated correctly.
3. **Actions:** Inside `{ ... }`, `$1`, `$3` refer to matched tokens/expressions, `$$` stores the result.
4. **Parentheses:** `(' expr ')'` handles grouping.
5. **Error handling:** `yyerror` prints syntax errors.

---

### ðŸ”¹ How to Compile and Run

1. **Create the lexer** (`calc.l`):

```c
%{
#include "calc.tab.h"
#include <iostream>
using namespace std;
%}

%%

[0-9]+      { yylval = atoi(yytext); return NUMBER; }
[+\-*/]     { return yytext[0]; }
[ \t\n]+    { /* ignore whitespace */ }
.           { return yytext[0]; }

%%
```

2. **Generate Bison parser:**

```bash
bison -d calc.y
```

3. **Generate Flex scanner:**

```bash
flex calc.l
```

4. **Compile everything:**

```bash
g++ calc.tab.c lex.yy.c -o calc -lfl
```

5. **Run the calculator:**

```bash
./calc
```

**Input:**

```
(2 + 3) * 4
```

**Output:**

```
5
20
```

---

### ðŸ”¹ Key Points

| Symbol           | Meaning                             |
| ---------------- | ----------------------------------- |
| `$1`, `$2`, `$3` | Values of matched symbols in a rule |
| `$$`             | Value of current non-terminal       |
| `%left`          | Operator precedence                 |
| `yyparse()`      | Starts parsing process              |
| `yyerror()`      | Handles syntax errors               |

---

