## ğŸ“ Project Structure

```
php-mysql/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ php/
â”‚   â””â”€â”€ index.php
â””â”€â”€ mysql/
    â””â”€â”€ data/
```

---

## ğŸ“„ `docker-compose.yml`

version: "3.9"

services:
php:
image: php:8.2-apache
container_name: php_app
ports:
- "8080:80"
volumes:
- ./php:/var/www/html
environment:
MYSQL_HOST: db
MYSQL_DATABASE: app_db
MYSQL_USER: app_user
MYSQL_PASSWORD: app_pass
networks:
- app_net

db:
image: mysql:8.0
container_name: mysql_db
restart: always
environment:
MYSQL_ROOT_PASSWORD: root_pass
MYSQL_DATABASE: app_db
MYSQL_USER: app_user
MYSQL_PASSWORD: app_pass
volumes:
- ./mysql/data:/var/lib/mysql
networks:
- app_net

networks:
app_net:
driver: bridge

---

## ğŸ“„ `php/index.php`

---

## ğŸ” Key Concepts Explained

### ğŸ§© Two Services

```yaml
services:
  php:
  db:
```

* `php` â†’ Apache + PHP application
* `db` â†’ MySQL database

---

### ğŸ”Œ Service-to-Service Communication

```yaml
MYSQL_HOST: db
```

* `db` is the **service name**
* Docker DNS resolves it automatically
* No IP addresses needed

---

### ğŸ“¦ Volumes (Persistence)

#### PHP Code

```yaml
- ./php:/var/www/html
```

* Live sync of your PHP files
* Edit locally â†’ refresh browser

#### MySQL Data

```yaml
- ./mysql/data:/var/lib/mysql
```

* Database survives container restarts
* Without this â†’ data loss ğŸ’¥

---

### ğŸ” Environment Variables

```yaml
environment:
  MYSQL_DATABASE: app_db
```

* Secure
* Configurable
* Production-friendly
* Same pattern used by Django, Laravel, Node, Go

---

### ğŸ”„ `restart: always`

* Automatically restarts MySQL if it crashes
* Critical for databases

---

## â–¶ï¸ Run the Stack

```bash
docker compose up
```

Open:

```
http://localhost:8080
```

You should see:

```
âœ… Connected to MySQL successfully!
```

---
