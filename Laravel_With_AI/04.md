To create a **Qdrant collection** for storing vectors (e.g., image embeddings), you can use the **HTTP API** (`curl`) or the **Python client**. Below are examples for both methods:

---

### **1. Using `curl` (HTTP API)**
#### **Create a Collection**
```bash
curl -X PUT http://localhost:6333/collections/my-images \
  -H 'Content-Type: application/json' \
  -d '{
    "vectors": {
      "size": 512,          # Dimension of your vectors (e.g., 512 for ResNet18)
      "distance": "Cosine"  # Similarity metric (Cosine, Euclidean, Dot)
    }
  }'
```

#### **Expected Response**
```json
{
  "result": true,
  "status": "ok",
  "time": 0.001
}
```

#### **Key Parameters**
| Parameter   | Description                                                                 |
|-------------|-----------------------------------------------------------------------------|
| `size`      | Dimension of vectors (e.g., `512` for ResNet18, `2048` for ResNet50).       |
| `distance`  | Similarity metric: `"Cosine"` (recommended for embeddings), `"Euclidean"`.  |

---

### **2. Using Python Client**
First, install the Qdrant client:
```bash
pip install qdrant-client
```

#### **Create a Collection**
```python
from qdrant_client import QdrantClient
from qdrant_client.http import models

client = QdrantClient(host="localhost", port=6333)  # Connect to local Qdrant

client.create_collection(
    collection_name="my-images",
    vectors_config=models.VectorParams(
        size=512,           # Dimension of vectors
        distance=models.Distance.COSINE  # Similarity metric
    )
)
```

#### **Verify Collection Exists**
```python
collections = client.get_collections()
print(collections)
```

---

### **3. Advanced Configuration**
#### **Add Payload (Metadata)**
You can attach metadata (e.g., image labels, filenames) to vectors:
```bash
curl -X PUT http://localhost:6333/collections/my-images \
  -H 'Content-Type: application/json' \
  -d '{
    "vectors": {
      "size": 512,
      "distance": "Cosine"
    },
    "payload_schema": {
      "image_id": "keyword",  # Example metadata field
      "label": "keyword"
    }
  }'
```

#### **Using Python**
```python
client.create_collection(
    collection_name="my-images",
    vectors_config=models.VectorParams(size=512, distance=models.Distance.COSINE),
    payload_schema={
        "image_id": models.PayloadSchemaType.KEYWORD,
        "label": models.PayloadSchemaType.KEYWORD
    }
)
```

---

### **4. Insert Vectors into the Collection**
#### **Using `curl`**
```bash
curl -X POST http://localhost:6333/collections/my-images/points \
  -H 'Content-Type: application/json' \
  -d '{
    "points": [
      {
        "id": 1,
        "vector": [0.12, 0.34, ..., 0.45],  # Your 512-d vector
        "payload": {"image_id": "img1", "label": "cat"}
      }
    ]
  }'
```

#### **Using Python**
```python
client.upsert(
    collection_name="my-images",
    points=[
        models.PointStruct(
            id=1,
            vector=[0.12, 0.34, ..., 0.45],  # Your 512-d vector
            payload={"image_id": "img1", "label": "cat"}
        )
    ]
)
```

---

### **5. Verify Collection Creation**
Check if the collection exists:
```bash
curl http://localhost:6333/collections/my-images
```
Response:
```json
{
  "result": {
    "status": "green",
    "vectors_count": 0,
    "payload_schema": {}
  },
  "status": "ok",
  "time": 0.001
}
```

---

### **Key Notes**
1. **Distance Metrics**:
   - `Cosine`: Best for embeddings (e.g., ResNet, CLIP).
   - `Euclidean`: Useful for L2-normalized vectors.
   - `Dot`: For high-dimensional sparse vectors.

2. **Payloads**:
   - Attach metadata (`image_id`, `label`, etc.) for filtering during search.

3. **Scalability**:
   - For large datasets, use **batch insertion** (e.g., `points` array in `curl`).

4. **Qdrant Cloud**:
   Replace `localhost` with your cloud instance URL if hosted.

---
