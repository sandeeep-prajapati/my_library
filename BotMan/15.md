Great! Here's how you can **send a chatbot message update to the customer when the order status changes using events in Laravel with Botman**:

---

### âœ… **Step-by-step Implementation:**

#### **1. Set up Event and Listener**

First, create a Laravel event for order status update:

```bash
php artisan make:event OrderStatusUpdated
```

**In `app/Events/OrderStatusUpdated.php`:**

```php
namespace App\Events;

use Illuminate\Foundation\Events\Dispatchable;
use Illuminate\Queue\SerializesModels;
use App\Models\Order;

class OrderStatusUpdated
{
    use Dispatchable, SerializesModels;

    public $order;

    public function __construct(Order $order)
    {
        $this->order = $order;
    }
}
```

#### **2. Fire the Event**

Whenever the order status is updated (maybe from your staff dashboard):

```php
event(new OrderStatusUpdated($order));
```

#### **3. Create Listener to send Botman message**

```bash
php artisan make:listener SendOrderStatusUpdate --event=OrderStatusUpdated
```

**In `app/Listeners/SendOrderStatusUpdate.php`:**

```php
namespace App\Listeners;

use App\Events\OrderStatusUpdated;
use BotMan\BotMan\BotManFactory;
use BotMan\BotMan\Drivers\DriverManager;
use App\Models\User; // assuming customer is user

class SendOrderStatusUpdate
{
    public function handle(OrderStatusUpdated $event)
    {
        $order = $event->order;
        $user = $order->user; // assuming relation

        DriverManager::loadDriver(\BotMan\Drivers\Web\WebDriver::class);

        $config = []; // Add config if needed
        $botman = BotManFactory::create($config);

        $status = ucfirst($order->status);

        $message = "Hi {$user->name}, your order #{$order->id} is now **$status**.";

        $botman->say($message, $user->chat_id, \BotMan\Drivers\Web\WebDriver::class);
    }
}
```

---

### ðŸ”§ **Additional Notes:**

* Ensure `chat_id` (or any user identifier used in Botman) is stored in your user or order model.
* You can also send buttons, e.g., "Track Order", using `Question` class if needed.
* Make sure events and listeners are registered in `EventServiceProvider`.

---

