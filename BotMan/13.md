
---

### âœ… Step-by-Step Guide to Real-Time Kitchen Notifications in Laravel

---

### **1. Set Up Broadcasting in Laravel**

#### ðŸ“¦ Step 1: Install Laravel Echo Server or Reverb (or use Pusher)

**Using Laravel Reverb (Laravel 11+):**

```bash
php artisan install:reverb
```

**OR Using Pusher:**

```bash
composer require pusher/pusher-php-server
```

In `.env`, set:

```env
BROADCAST_DRIVER=pusher

PUSHER_APP_ID=your_app_id
PUSHER_APP_KEY=your_app_key
PUSHER_APP_SECRET=your_app_secret
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
```

In `config/broadcasting.php`, ensure `pusher` or `reverb` config is correct.

---

### **2. Configure `broadcast` and `websockets`**

Install frontend dependencies:

```bash
npm install --save laravel-echo pusher-js
```

In `resources/js/bootstrap.js`:

```js
import Echo from 'laravel-echo';

window.Pusher = require('pusher-js');

window.Echo = new Echo({
    broadcaster: 'pusher',
    key: process.env.MIX_PUSHER_APP_KEY,
    cluster: 'mt1',
    forceTLS: true
});
```

---

### **3. Create the Order Placed Event**

```bash
php artisan make:event OrderPlaced
```

In `app/Events/OrderPlaced.php`:

```php
use Illuminate\Broadcasting\InteractsWithSockets;
use Illuminate\Contracts\Broadcasting\ShouldBroadcast;

class OrderPlaced implements ShouldBroadcast
{
    public $order;

    public function __construct($order)
    {
        $this->order = $order;
    }

    public function broadcastOn()
    {
        return ['kitchen-channel'];
    }

    public function broadcastAs()
    {
        return 'order.placed';
    }
}
```

---

### **4. Dispatch the Event from Chatbot Conversation**

In your Botman `Conversation` class or controller where order ends:

```php
event(new OrderPlaced($order));
```

---

### **5. Listen on Frontend (Kitchen Staff Panel)**

In a Blade view or Vue/React component:

```js
window.Echo.channel('kitchen-channel')
    .listen('.order.placed', (e) => {
        alert('New order received: ' + JSON.stringify(e.order));
        // You can display order in dashboard dynamically
    });
```

---

### **6. Secure Broadcasts (Optional)**

* Use private channels for authenticated dashboards (kitchen staff).
* Add `BroadcastServiceProvider` routes if needed.

---

### âœ… Output

Whenever an order is placed through the chatbot:

* A real-time event is broadcast.
* Kitchen dashboard receives a live alert with order details.
* No page refresh is needed.

---
