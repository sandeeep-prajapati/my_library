
* 📥 **View incoming orders**
* 🔄 **Update status (Preparing, Out for Delivery, Delivered)**
* 🚀 **Receive real-time updates (if integrated with broadcasting)**

---

## ✅ Step-by-Step Guide: Staff Dashboard for Managing Orders

---

### 🔧 Step 1: Set Up the Orders Table

If not already created:

```bash
php artisan make:model Order -m
```

In `database/migrations/xxxx_xx_xx_create_orders_table.php`:

```php
public function up()
{
    Schema::create('orders', function (Blueprint $table) {
        $table->id();
        $table->string('customer_name');
        $table->string('item');
        $table->enum('status', ['Pending', 'Preparing', 'Out for Delivery', 'Delivered'])->default('Pending');
        $table->timestamps();
    });
}
```

```bash
php artisan migrate
```

---

### 📁 Step 2: Create OrderController

```bash
php artisan make:controller OrderController
```

In `app/Http/Controllers/OrderController.php`:

```php
use App\Models\Order;
use Illuminate\Http\Request;

class OrderController extends Controller
{
    public function index()
    {
        $orders = Order::latest()->get();
        return view('orders.index', compact('orders'));
    }

    public function updateStatus(Request $request, $id)
    {
        $order = Order::findOrFail($id);
        $order->status = $request->status;
        $order->save();

        return redirect()->back()->with('success', 'Order status updated.');
    }
}
```

---

### 🧭 Step 3: Define Routes

In `routes/web.php`:

```php
use App\Http\Controllers\OrderController;

Route::get('/dashboard/orders', [OrderController::class, 'index'])->name('orders.index');
Route::post('/dashboard/orders/{id}/status', [OrderController::class, 'updateStatus'])->name('orders.updateStatus');
```

---

### 🖥️ Step 4: Create the Blade View

Create `resources/views/orders/index.blade.php`:

```blade
@extends('layouts.app')

@section('content')
<div class="container">
    <h2>Incoming Orders</h2>
    @foreach ($orders as $order)
        <div class="card my-3 p-3">
            <strong>Order #{{ $order->id }}</strong><br>
            <b>Customer:</b> {{ $order->customer_name }}<br>
            <b>Item:</b> {{ $order->item }}<br>
            <b>Status:</b> 
            <form action="{{ route('orders.updateStatus', $order->id) }}" method="POST" class="d-inline-block">
                @csrf
                <select name="status" onchange="this.form.submit()">
                    @foreach (['Pending', 'Preparing', 'Out for Delivery', 'Delivered'] as $status)
                        <option value="{{ $status }}" {{ $order->status === $status ? 'selected' : '' }}>{{ $status }}</option>
                    @endforeach
                </select>
            </form>
        </div>
    @endforeach
</div>
@endsection
```

---

### 🎨 Optional: Styling (Bootstrap 5)

Ensure Bootstrap is added in `resources/views/layouts/app.blade.php`:

```html
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
```

---

### 🔄 Optional: Real-Time Updates

If you're using broadcasting (like with Laravel Echo):

* Reload the order list via JavaScript or use **Livewire** to automatically re-render on broadcast event.

---

### ✅ Final Result

* Kitchen staff can open `/dashboard/orders`
* See new orders as they arrive
* Change status from dropdown menu
* Real-time support possible with broadcasting or polling

---
