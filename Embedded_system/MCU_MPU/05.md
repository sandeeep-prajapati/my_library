Here's a **FreeRTOS** task example for an **STM32**-like microcontroller that:

* üü¢ **Toggles an LED periodically**, and
* üõ∞Ô∏è **Logs data over UART** every time the LED toggles.

---

### üìã **Assumptions**

* FreeRTOS is properly set up.
* HAL drivers for GPIO and UART are used (`HAL_GPIO_TogglePin()` and `HAL_UART_Transmit()`).
* `LED_GPIO_Port`, `LED_Pin`, and `huart1` are defined in your project (e.g., from STM32CubeMX).

---

### ‚úÖ **FreeRTOS Task Code**

```c
#include "FreeRTOS.h"
#include "task.h"
#include "stm32f4xx_hal.h"  // or your specific HAL header

extern UART_HandleTypeDef huart1;  // UART handle from HAL

void vLEDUARTTask(void *pvParameters) {
    const TickType_t xDelay = pdMS_TO_TICKS(1000);  // 1000 ms delay
    char *message = "LED toggled\r\n";

    for (;;) {
        // Toggle LED
        HAL_GPIO_TogglePin(LED_GPIO_Port, LED_Pin);

        // Send message over UART
        HAL_UART_Transmit(&huart1, (uint8_t *)message, strlen(message), HAL_MAX_DELAY);

        // Delay
        vTaskDelay(xDelay);
    }
}
```

---

### üßµ **Task Creation (in `main.c` or `main()`):**

```c
int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_GPIO_Init();
    MX_USART1_UART_Init();  // or your UART init function

    xTaskCreate(vLEDUARTTask, "LED_UART", 128, NULL, 1, NULL);

    vTaskStartScheduler();

    while (1);  // Should never reach here
}
```

---

### üì¶ **Key Components**

| Part                | Purpose                                     |
| ------------------- | ------------------------------------------- |
| `vLEDUARTTask`      | Periodically toggles LED and logs over UART |
| `xTaskCreate`       | Creates the task                            |
| `vTaskDelay`        | Non-blocking delay in FreeRTOS              |
| `HAL_UART_Transmit` | Sends data over UART using HAL              |

---

