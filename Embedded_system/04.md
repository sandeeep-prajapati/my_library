Sure, Sandeep! Below is a **multithreaded C program using `pthread`** that simulates **blinking an LED** connected to a **GPIO pin**.

Since we can't access real GPIO in a simulation, we'll:

* Use `printf` to simulate GPIO on/off.
* Simulate blinking with `sleep()`.
* Use two threads:

  * One to **blink the LED**.
  * One to **monitor a pseudo-button press** (for example, terminating after 10 blinks).

---

## ðŸ”§ Requirements

To compile:

```bash
gcc -pthread led_blink_sim.c -o led_blink_sim
```

---

## ðŸ’» Code: `led_blink_sim.c`

```c
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <stdbool.h>

#define MAX_BLINKS 10

// Simulated GPIO state
bool gpio_state = false;
int blink_count = 0;
bool stop_blinking = false;
pthread_mutex_t lock;

void set_gpio(bool state) {
    gpio_state = state;
    printf("GPIO %s (LED %s)\n", state ? "HIGH" : "LOW", state ? "ON" : "OFF");
}

void* blink_led(void* arg) {
    while (1) {
        pthread_mutex_lock(&lock);
        if (stop_blinking || blink_count >= MAX_BLINKS) {
            pthread_mutex_unlock(&lock);
            break;
        }
        set_gpio(true);
        sleep(1);  // LED ON for 1 second
        set_gpio(false);
        sleep(1);  // LED OFF for 1 second
        blink_count++;
        pthread_mutex_unlock(&lock);
    }
    return NULL;
}

void* monitor_button(void* arg) {
    while (1) {
        sleep(5);  // Check every 5 seconds
        pthread_mutex_lock(&lock);
        if (blink_count >= MAX_BLINKS) {
            stop_blinking = true;
            pthread_mutex_unlock(&lock);
            printf("Button thread: Max blinks reached. Stopping LED blinking.\n");
            break;
        }
        pthread_mutex_unlock(&lock);
    }
    return NULL;
}

int main() {
    pthread_t led_thread, button_thread;

    pthread_mutex_init(&lock, NULL);

    pthread_create(&led_thread, NULL, blink_led, NULL);
    pthread_create(&button_thread, NULL, monitor_button, NULL);

    pthread_join(led_thread, NULL);
    pthread_join(button_thread, NULL);

    pthread_mutex_destroy(&lock);

    printf("LED blinking simulation completed.\n");
    return 0;
}
```

---

## ðŸ“Œ Sample Output

```
GPIO HIGH (LED ON)
GPIO LOW (LED OFF)
GPIO HIGH (LED ON)
...
Button thread: Max blinks reached. Stopping LED blinking.
LED blinking simulation completed.
```

---

## ðŸ”§ Extend This To:

* Use `/sys/class/gpio/gpioXX/value` for real GPIO control in Linux.
* Replace `sleep()` with `usleep()` or `nanosleep()` for higher precision.
* Add signal handling to support Ctrl+C cleanup.
* Use `wiringPi` or `libgpiod` if running on Raspberry Pi.

