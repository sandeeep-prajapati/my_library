
---

## ğŸ¯ Goal:

* Create a model (`Tool`)
* Create a factory to generate fake data
* Create a seeder to populate the table
* Make these usable via:

  ```bash
  php artisan db:seed
  php artisan tinker
  Tool::factory()->create()
  ```

---

## ğŸ› ï¸ Step-by-Step Implementation

---

### ğŸ“ 1. Create Model in Your Package

```bash
mkdir -p packages/sandeep/mytools/src/Models
touch packages/sandeep/mytools/src/Models/Tool.php
```

#### âœï¸ `Models/Tool.php`

```php
<?php

namespace Sandeep\MyTools\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;

class Tool extends Model
{
    use HasFactory;

    protected $fillable = ['name'];
}
```

---

### ğŸ§ª 2. Create Factory

```bash
mkdir -p packages/sandeep/mytools/database/factories
touch packages/sandeep/mytools/database/factories/ToolFactory.php
```

#### âœï¸ `database/factories/ToolFactory.php`

```php
<?php

namespace Sandeep\MyTools\Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Sandeep\MyTools\Models\Tool;

class ToolFactory extends Factory
{
    protected $model = Tool::class;

    public function definition(): array
    {
        return [
            'name' => $this->faker->word(),
        ];
    }
}
```

---

### ğŸŒ± 3. Create Seeder

```bash
mkdir -p packages/sandeep/mytools/database/seeders
touch packages/sandeep/mytools/database/seeders/ToolSeeder.php
```

#### âœï¸ `database/seeders/ToolSeeder.php`

```php
<?php

namespace Sandeep\MyTools\Database\Seeders;

use Illuminate\Database\Seeder;
use Sandeep\MyTools\Models\Tool;

class ToolSeeder extends Seeder
{
    public function run(): void
    {
        Tool::factory()->count(10)->create();
    }
}
```

---

### ğŸ§© 4. Register the Factory Path in `MyToolsServiceProvider`

In the `boot()` method:

```php
use Illuminate\Database\Eloquent\Factories\Factory;

public function boot()
{
    parent::boot();

    // Load custom factory path
    Factory::guessFactoryNamesUsing(function (string $modelName) {
        return 'Sandeep\\MyTools\\Database\\Factories\\' . class_basename($modelName) . 'Factory';
    });
}
```

âœ… This tells Laravel where to find the factory.

---

### ğŸ§© 5. Register Seeder in `composer.json` Autoload

In `packages/sandeep/mytools/composer.json`:

```json
"autoload": {
    "psr-4": {
        "Sandeep\\MyTools\\": "src/",
        "Sandeep\\MyTools\\Database\\Seeders\\": "database/seeders/"
    }
}
```

Then run:

```bash
composer dump-autoload
```

---

### ğŸ§ª 6. Run Seeder From Laravel App

In your main Laravel appâ€™s `DatabaseSeeder.php`:

```php
use Sandeep\MyTools\Database\Seeders\ToolSeeder;

public function run(): void
{
    $this->call(ToolSeeder::class);
}
```

Then run:

```bash
php artisan db:seed
```

âœ… Output:

> 10 rows inserted into `tools` table.

---

### ğŸ”„ 7. Test Factory in Tinker

```bash
php artisan tinker

>>> Sandeep\MyTools\Models\Tool::factory()->create()
```

âœ… Will generate one record with fake data.

---

## âœ… Summary

| âœ… Item                     | Description                           |
| -------------------------- | ------------------------------------- |
| `Tool.php`                 | Eloquent model                        |
| `ToolFactory`              | Creates fake records                  |
| `ToolSeeder`               | Seeds data to DB                      |
| `guessFactoryNamesUsing()` | Registers custom factory path         |
| `composer.json` autoload   | Makes seeders discoverable            |
| `tinker + factory`         | Works just like native Laravel models |

---

### ğŸ§  Bonus Tip:

You can allow users to publish the factory/seeder like:

```php
$this->publishes([
    __DIR__.'/../database/seeders' => database_path('seeders/vendor/mytools'),
    __DIR__.'/../database/factories' => database_path('factories/vendor/mytools'),
], 'mytools-seeders');
```

Then publish with:

```bash
php artisan vendor:publish --tag=mytools-seeders
```

---
