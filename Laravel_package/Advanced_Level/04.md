You're almost at the finish line, Sandeep! ğŸ
This is **Prompt 14** â€“ a **modern and elegant way** to write Laravel package service providers using `PackageServiceProvider`.

---

## âœ… Prompt 14:

**Use Laravel's `PackageServiceProvider` class** (Laravel 8.x+), from `Illuminate\Support\ServiceProvider`, to simplify your package setup.

---

## ğŸ¯ Goal:

* Replace verbose `boot()` and `register()` logic.
* Use Laravelâ€™s fluent `configurePackage()` method to:

  * Register config
  * Load views, routes, migrations
  * Register commands and translations
  * Define publishable assets
* Cleaner, more maintainable provider code.

---

## ğŸ› ï¸ Step-by-Step Guide

---

### ğŸ“¦ 1. Install `spatie/laravel-package-tools` (recommended helper)

Laravel doesn't provide `PackageServiceProvider` directly â€” it's part of [Spatie's](https://github.com/spatie/laravel-package-tools) helper package:

```bash
composer require spatie/laravel-package-tools
```

---

### ğŸ§± 2. Create `MyToolsServiceProvider` using `PackageServiceProvider`

Update your service provider like this:

```php
<?php

namespace Sandeep\MyTools;

use Illuminate\Support\Facades\Route;
use Sandeep\MyTools\Console\Commands\GreetCommand;
use Sandeep\MyTools\Listeners\UserLoginListener;
use Illuminate\Auth\Events\Login;
use Spatie\LaravelPackageTools\Package;
use Spatie\LaravelPackageTools\PackageServiceProvider;

class MyToolsServiceProvider extends PackageServiceProvider
{
    public function configurePackage(Package $package): void
    {
        $package
            ->name('mytools')
            ->hasConfigFile()
            ->hasViews()
            ->hasRoute('web') // loads routes/web.php
            ->hasMigration('create_tools_table')
            ->hasCommand(GreetCommand::class);
    }

    public function packageRegistered()
    {
        // Container bindings (interface to class)
        $this->app->bind(
            \Sandeep\MyTools\Contracts\GreeterInterface::class,
            \Sandeep\MyTools\Services\DefaultGreeter::class
        );

        // Load helpers manually (optional)
        if (file_exists(__DIR__.'/helpers.php')) {
            require_once __DIR__.'/helpers.php';
        }

        // Register event listeners
        $this->app['events']->listen(
            Login::class,
            [UserLoginListener::class, 'handle']
        );
    }
}
```

---

### âœ… 3. File Structure Expectations

Make sure the file structure matches the helper methods:

| Method Used                            | Path Expected                                |
| -------------------------------------- | -------------------------------------------- |
| `->hasConfigFile()`                    | `config/mytools.php`                         |
| `->hasViews()`                         | `resources/views/`                           |
| `->hasRoute('web')`                    | `routes/web.php`                             |
| `->hasMigration('create_tools_table')` | `database/migrations/create_tools_table.php` |

âœ… These are **auto-discovered** and **auto-published** via `vendor:publish`.

---

### ğŸ“¤ 4. Test Auto-Load

Once registered in `composer.json`, Laravel will auto-load:

* Routes: `mytools/greet/{name}`
* Views: `mytools::greet`
* Commands: `php artisan mytools:greet`
* Config: `config/mytools.php`

All with **much less boilerplate** than before!

---

## âœ… Summary

| Feature    | Old Way                | New Way (`PackageServiceProvider`) |
| ---------- | ---------------------- | ---------------------------------- |
| Config     | `mergeConfigFrom()`    | `->hasConfigFile()`                |
| Views      | `loadViewsFrom()`      | `->hasViews()`                     |
| Routes     | `loadRoutesFrom()`     | `->hasRoute('web')`                |
| Migrations | `loadMigrationsFrom()` | `->hasMigration('filename')`       |
| Commands   | `$this->commands()`    | `->hasCommand()`                   |

---

## ğŸ§  Bonus: Publish Tags

Spatie's helper automatically generates:

```bash
php artisan vendor:publish --tag=mytools-config
php artisan vendor:publish --tag=mytools-migrations
php artisan vendor:publish --tag=mytools-views
```

> No need to manually define `publishes([...], 'tag')`.

---

Would you like to:

* ğŸ”„ Continue to **Prompt 15: Support Laravel auto-discovery via `composer.json`**
* ğŸ’¾ Or get a **ZIP of your full Laravel package with all 14 prompts completed**?
