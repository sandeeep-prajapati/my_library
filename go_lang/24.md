Here is a **clear, practical guide to debugging Go programs using Delve (dlv)** with **sample commands**, **examples**, and **real-world workflows**.
This will help you debug CLI apps, servers, and concurrent programs.

---

# üß∞ **What is Delve (dlv)?**

**Delve** is the official Go debugger.
It lets you:

* Set breakpoints
* Step through code
* Inspect variables
* Debug goroutines
* Debug running servers
* Debug tests
* Attach to running processes

---

# ‚úÖ **1. Install Delve**

```bash
go install github.com/go-delve/delve/cmd/dlv@latest
```

Binary path:

```
~/go/bin/dlv
```

---

# üîç **2. Run a Go Program Under Debugger**

Example Go file: `main.go`

```go
package main

import "fmt"

func main() {
    x := 10
    y := 20
    z := x + y
    fmt.Println("Result:", z)
}
```

### Run using Delve:

```bash
dlv debug
```

Delve starts an interactive debug session:

```
(dlv)
```

---

# üéØ **3. Common Delve Commands**

| Command            | Meaning                   |
| ------------------ | ------------------------- |
| `break main.main`  | Set breakpoint            |
| `break main.go:10` | Break at line             |
| `break myFunc`     | Break at function         |
| `continue` or `c`  | Run until next breakpoint |
| `step` or `s`      | Step into function        |
| `next` or `n`      | Step over                 |
| `stepout`          | Step out                  |
| `print x`          | Print variable            |
| `locals`           | Show local variables      |
| `args`             | Function args             |
| `goroutines`       | List goroutines           |
| `goroutine <id>`   | Switch goroutine          |
| `quit` or `q`      | Exit debugger             |

---

# üéØ **4. Setting Breakpoints**

### Break at function:

```bash
(dlv) break main.main
```

### Break at a specific line:

```bash
(dlv) break main.go:7
```

### Break conditionally:

```bash
(dlv) break main.go:10 if x == 5
```

### Show breakpoints:

```bash
(dlv) breakpoints
```

---

# üë£ **5. Stepping Through Code**

### Step into function:

```bash
(dlv) step
```

### Step over:

```bash
(dlv) next
```

### Step out:

```bash
(dlv) stepout
```

---

# üîé **6. Inspecting Variables**

Inside the debugger:

### Print single variable:

```bash
(dlv) print x
```

### Print struct fields:

```bash
(dlv) print user
(dlv) print user.Name
```

### View all locals:

```bash
(dlv) locals
```

### Evaluate expression:

```bash
(dlv) print x + y * 2
```

---

# üö¶ **7. Debugging a Web Server**

Suppose your server starts in `cmd/api/main.go`.

```bash
dlv debug ./cmd/api
```

Set a breakpoint in handler:

```bash
(dlv) break handler.go:25
```

Continue execution:

```bash
(dlv) continue
```

Send request:

```
curl http://localhost:8080/user?id=1
```

Debugger stops at breakpoint ‚Üí inspect variables.

---

# üßµ **8. Debugging Goroutines**

### List goroutines:

```bash
(dlv) goroutines
```

### Switch to a goroutine:

```bash
(dlv) goroutine 15
```

### View goroutine stack trace:

```bash
(dlv) goroutine 15 bt
```

Extremely useful for debugging concurrency issues.

---

# üß™ **9. Debugging Tests with Delve**

Run tests interactively:

```bash
dlv test
```

Debug a specific test file:

```bash
dlv test ./service
```

Debug a test and stop at specific breakpoint:

```bash
dlv test -- -test.run TestUserService
```

---

# üõ†Ô∏è **10. Attach Delve to a Running Process**

Find Go process:

```bash
ps aux | grep myserver
```

Suppose PID = **4523**

Attach:

```bash
sudo dlv attach 4523
```

Useful for debugging staging/production replicas.

---

# üèπ **11. Use Delve with VS Code**

Install extension:

```
Go ‚Äî by Google
```

Launch debug config (`.vscode/launch.json`):

```json
{
  "name": "Debug Go",
  "type": "go",
  "request": "launch",
  "program": "${workspaceFolder}/cmd/api"
}
```

Press **F5** ‚Üí breakpoints inside editor work.

---

# üî• **12. Use Delve in Headless Mode (API mode)**

For remote debugging:

```bash
dlv debug --headless --listen=:2345 --api-version=2
```

Connect from VS Code or GoLand.

---

# üß™ Full Sample Session

```
$ dlv debug
Type 'help' for list of commands.

(dlv) break main.go:8
Breakpoint 1 set at main.go:8

(dlv) continue
> main.main() ./main.go:8 (hits total:1)

(dlv) print x
10

(dlv) next
(dlv) print z
30

(dlv) quit
```

---
