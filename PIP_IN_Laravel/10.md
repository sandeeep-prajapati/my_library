Here’s how to create a **Laravel Artisan command** `php artisan py:export` that exports your current Python environment to `requirements.txt` using `pip freeze`:

---

## ✅ Step-by-Step: `py:export` Command

---

### 1. 📦 Create the Command

```bash
php artisan make:command PyExportCommand
```

---

### 2. ✏️ Update Command File

**File:** `app/Console/Commands/PyExportCommand.php`

```php
<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Symfony\Component\Process\Process;

class PyExportCommand extends Command
{
    protected $signature = 'py:export {--file= : Output file path, default requirements.txt}';
    protected $description = 'Export the current Python environment packages to requirements.txt using pip freeze';

    public function handle()
    {
        $venvPath = base_path('.venv');
        $outputFile = $this->option('file') ?? base_path('requirements.txt');

        // Determine pip path
        $pipPath = $venvPath . '/bin/pip';
        if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
            $pipPath = $venvPath . '\\Scripts\\pip.exe';
        }

        if (!file_exists($pipPath)) {
            $this->error('.venv not found. Run `php artisan py:init` first.');
            return 1;
        }

        $this->info("Exporting packages to {$outputFile} ...");

        $process = new Process([$pipPath, 'freeze']);
        $process->run();

        if (!$process->isSuccessful()) {
            $this->error('Failed to export packages.');
            $this->error($process->getErrorOutput());
            return 1;
        }

        file_put_contents($outputFile, $process->getOutput());
        $this->info('Export completed successfully.');
        $this->line(file_get_contents($outputFile));

        return 0;
    }
}
```

---

### 3. 🧪 Run the Command

#### Default export:

```bash
php artisan py:export
```

* Saves all packages to `requirements.txt`
* Displays the content in CLI

#### Custom file path:

```bash
php artisan py:export --file=env_packages.txt
```

---

### 4. 🔹 Example Output

```
Exporting packages to /path/to/project/requirements.txt ...
asgiref==3.8.2
numpy==1.26.4
pandas==2.1.1
requests==2.31.0
scikit-learn==1.3.2
Export completed successfully.
```

---

### 🧠 Optional Enhancements

* Add `--json` flag to also generate JSON representation
* Add overwrite confirmation if file exists
* Integrate with Blade dashboard for “Export requirements” button
* Optionally, commit exported file to project repository automatically

---

I can also create a **REST endpoint** `/api/python/export` that triggers this command and returns the `requirements.txt` for download if you want.
