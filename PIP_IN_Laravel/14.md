Here’s a clean way to implement **logging for all Python-related operations** in your Laravel project and store logs in `storage/logs/py-package.log`. This ensures every command or API action related to Python packages is logged with timestamp, action, package, version, and status.

---

## ✅ Step 1: Create a Dedicated Logger

Laravel’s **logging system** can handle custom channels. Let’s create a new channel for Python package operations.

**File:** `config/logging.php`

Add a new channel under `channels`:

```php
'channels' => [

    // existing channels...

    'python' => [
        'driver' => 'single',
        'path' => storage_path('logs/py-package.log'),
        'level' => 'info',
    ],
],
```

---

## ✅ Step 2: Create a Logging Service

**File:** `app/Services/PythonLoggerService.php`

```php
<?php

namespace App\Services;

use Illuminate\Support\Facades\Log;

class PythonLoggerService
{
    /**
     * Log a Python operation.
     *
     * @param string $action   Action performed (install/remove/upgrade/etc.)
     * @param string|null $package Name of the package
     * @param string|null $version Version (if applicable)
     * @param string $status Status of the operation (success/failure/info)
     * @param string|null $message Optional message
     */
    public static function log(string $action, ?string $package = null, ?string $version = null, string $status = 'info', ?string $message = null)
    {
        $logMessage = [
            'action'  => $action,
            'package' => $package,
            'version' => $version,
            'status'  => $status,
            'message' => $message,
            'timestamp' => now()->toDateTimeString(),
        ];

        Log::channel('python')->info(json_encode($logMessage));
    }
}
```

---

## ✅ Step 3: Integrate Logger into Commands

Example: **Install Package Command**

```php
use App\Services\PythonLoggerService;

// after successful install
PythonLoggerService::log(
    action: 'install',
    package: $package,
    version: $version,
    status: 'success',
    message: 'Package installed successfully'
);

// if failed
PythonLoggerService::log(
    action: 'install',
    package: $package,
    version: $version,
    status: 'failure',
    message: $process->getErrorOutput()
);
```

---

### Step 4: Example for Other Actions

* **Remove:**

```php
PythonLoggerService::log('remove', $package, null, 'success', 'Package removed from environment');
```

* **Upgrade:**

```php
PythonLoggerService::log('upgrade', $package, $newVersion, 'success');
```

* **Activate virtual env:**

```php
PythonLoggerService::log('activate', null, null, 'info', 'Virtual environment activated');
```

---

## ✅ Step 5: Sample Log Entry (`storage/logs/py-package.log`)

```json
{
  "action": "install",
  "package": "numpy",
  "version": "1.26.4",
  "status": "success",
  "message": "Package installed successfully",
  "timestamp": "2025-09-26 23:50:12"
}
```

---

## ✅ Step 6: Advantages

* Centralized logging for all Python operations
* Easy to debug failures
* Can be parsed for dashboards or notifications
* Works with CLI commands, API endpoints, and Blade UI

---

I can also create a **Blade dashboard page** to view these logs in **real-time** with filtering by action (`install/remove/upgrade`) and status (`success/failure`).

