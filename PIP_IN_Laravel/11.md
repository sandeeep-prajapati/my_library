Hereâ€™s how to create a **Laravel Artisan command** `py:import` that reads a `requirements.txt` file and installs all listed Python packages into the `.venv` environment:

---

## âœ… Step-by-Step: `py:import` Command

---

### 1. ğŸ“¦ Create the Command

```bash
php artisan make:command PyImportCommand
```

---

### 2. âœï¸ Update Command File

**File:** `app/Console/Commands/PyImportCommand.php`

```php
<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Symfony\Component\Process\Process;

class PyImportCommand extends Command
{
    protected $signature = 'py:import {file : Path to requirements.txt}';
    protected $description = 'Import and install packages from an existing requirements.txt into the virtual environment';

    public function handle()
    {
        $filePath = $this->argument('file');
        $venvPath = base_path('.venv');

        if (!file_exists($filePath)) {
            $this->error("File not found: {$filePath}");
            return 1;
        }

        if (!is_dir($venvPath)) {
            $this->error('.venv not found. Run `php artisan py:init` first.');
            return 1;
        }

        // Determine pip path
        $pipPath = $venvPath . '/bin/pip';
        if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
            $pipPath = $venvPath . '\\Scripts\\pip.exe';
        }

        if (!file_exists($pipPath)) {
            $this->error('pip not found in virtual environment.');
            return 1;
        }

        $this->info("Installing packages from {$filePath}...");

        // Run pip install -r <file>
        $process = new Process([$pipPath, 'install', '-r', $filePath]);
        $process->run();

        if (!$process->isSuccessful()) {
            $this->error('Installation failed.');
            $this->error($process->getErrorOutput());
            return 1;
        }

        $this->info('Packages installed successfully:');
        $this->line($process->getOutput());

        return 0;
    }
}
```

---

### 3. ğŸ§ª Run the Command

#### Example usage:

```bash
php artisan py:import requirements.txt
```

**Custom path:**

```bash
php artisan py:import path/to/other_reqs.txt
```

**Output:**

```
Installing packages from requirements.txt...
Collecting numpy==1.26.4
Collecting pandas==2.1.1
Installing collected packages: numpy, pandas
Successfully installed numpy-1.26.4 pandas-2.1.1
Packages installed successfully.
```

---

### 4. âœ… Notes

* Works with `.venv` created by `py:init`
* Automatically installs all versions specified in `requirements.txt`
* Compatible with Windows and Linux/macOS
* Can be extended to **update `requirements.txt` dynamically** after install

---

