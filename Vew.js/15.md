### **Large-Scale Laravel + Vue Architecture: Best Practices**

For enterprise applications, a well-structured codebase is crucial. Here's a battle-tested approach combining Laravel's backend strengths with Vue's component-based architecture:

---

## **1. Directory Structure**
```
laravel-app/
├── app/
│   ├── Modules/                  # Domain-driven modules
│   │   ├── Users/
│   │   │   ├── Controllers/
│   │   │   ├── Models/
│   │   │   ├── Services/
│   │   │   └── Resources/
│   ├── Core/                     # Shared application logic
├── resources/
│   ├── js/
│   │   ├── app/                  # Main app entry
│   │   ├── components/           # Global components (Button, Card)
│   │   ├── composables/          # Reusable logic (useFetch, useForm)
│   │   ├── layouts/              # App layouts (AdminLayout, GuestLayout)
│   │   ├── modules/              # Feature modules
│   │   │   ├── Dashboard/
│   │   │   │   ├── components/   # Module-specific components
│   │   │   │   ├── stores/       # Pinia stores
│   │   │   │   └── views/        # Module views
│   │   ├── router/               # Vue Router config
│   │   ├── stores/               # Global Pinia stores
│   │   └── utils/                # Helpers, validators
├── routes/
│   ├── web.php                   # Main routes
│   └── modules/                  # Module routes
└── tests/
    ├── Feature/                  # Laravel feature tests
    └── Unit/                     # Vue component tests
```

---

## **2. Key Architectural Patterns**

### **2.1. Domain-Driven Design (Backend)**
- **Module Separation**:
  ```php
  // app/Modules/Orders/Controllers/OrderController.php
  class OrderController extends Controller
  {
      public function __construct(private OrderService $service) {}
  }
  ```
- **Service Layer**:
  ```php
  // app/Modules/Orders/Services/OrderService.php
  class OrderService
  {
      public function create(array $data): Order
      {
          return DB::transaction(fn() => Order::create($data));
      }
  }
  ```

### **2.2. Component-Centric Design (Frontend)**
- **Atomic Design Principles**:
  ```
  components/
  ├── atoms/        # Basic elements (Button, Input)
  ├── molecules/    # Combined atoms (SearchBar)
  ├── organisms/    # Complex UI (ProductCard)
  └── templates/    # Page skeletons
  ```

### **2.3. State Management**
- **Pinia Modular Stores**:
  ```javascript
  // resources/js/modules/Auth/stores/useAuthStore.js
  export const useAuthStore = defineStore('auth', {
      state: () => ({
          user: null,
          permissions: []
      }),
      actions: {
          async login() { /* ... */ }
      }
  });
  ```

---

## **3. Scaling Techniques**

### **3.1. Code Splitting**
```javascript
// Lazy-load routes
const UserProfile = () => import('@/modules/User/views/Profile.vue');
```

### **3.2. Dynamic Imports**
```javascript
// Load heavy components on demand
const HeavyChart = defineAsyncComponent(() => 
  import('@/components/HeavyChart.vue')
);
```

### **3.3. API Caching Layer**
```php
// app/Http/Middleware/CacheResponses.php
public function handle($request, Closure $next)
{
    $key = $request->fingerprint();
    return Cache::remember($key, 3600, fn() => $next($request));
}
```

---

## **4. Performance Optimization**

### **4.1. Backend**
- **Eloquent Performance**:
  ```php
  Order::with(['user:id,name', 'products:sku'])->paginate(25);
  ```
- **Redis Caching**:
  ```php
  Cache::store('redis')->put('dashboard_stats', $stats, 300);
  ```

### **4.2. Frontend**
- **Vite Config**:
  ```javascript
  // vite.config.js
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'pinia', 'axios'],
          charts: ['chart.js', 'apexcharts'],
        }
      }
    }
  }
  ```

---

## **5. Testing Strategy**
| Layer | Tools | Coverage Target |
|-------|-------|-----------------|
| **Unit** | Vitest, Jest | 70-80% |
| **Feature** | Laravel + Pest | 50-60% |
| **E2E** | Dusk, Cypress | Critical paths |

Example test:
```javascript
// Module-specific test
describe('Order Module', () => {
  it('calculates totals', async () => {
    const store = useOrderStore();
    await store.addProduct(mockProduct);
    expect(store.total).toEqual(99.99);
  });
});
```

---

## **6. CI/CD Pipeline**
```yaml
# .github/workflows/deploy.yml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: composer install
      - run: npm ci && npm run test
      - run: php artisan test
  
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm run build
      - uses: shivammathur/setup-php@v2
        with:
          php-version: '8.2'
      - run: rsync -avz ./ user@server:/var/www/app
```

---

## **Key Decisions**
| Concern | Recommendation |
|---------|---------------|
| **State Sharing** | Pinia over Vuex |
| **API Client** | Axios with interceptors |
| **Auth** | Sanctum for SPAs |
| **Forms** | Composables (useForm) |
| **Styling** | TailwindCSS + SCSS modules |

---

## **When to Break the Rules**
- **Monolithic vs Microservices**: Start modular within Laravel, split later
- **TypeScript Adoption**: Gradually introduce via `allowJs`
- **SSR Needs**: Use Inertia.js SSR only for critical pages

This structure has successfully scaled to applications with:
- 100+ Vue components  
- 50+ API endpoints  
- 10k+ daily active users  
